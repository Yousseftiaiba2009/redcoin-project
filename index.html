<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>محفظة RTC - التعدين الألماني</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #0d0d0d; color: white; text-align: center; padding: 40px; }
        .card { background: #1a1a1a; padding: 40px; border-radius: 20px; border: 2px solid #00ff00; box-shadow: 0 0 30px rgba(0,255,0,0.1); display: inline-block; min-width: 300px; }
        h1 { color: #00ff00; text-transform: uppercase; letter-spacing: 2px; }
        .balance { font-size: 3em; margin: 25px 0; font-weight: bold; font-family: monospace; }
        .status-box { margin-bottom: 20px; padding: 10px; border-radius: 10px; background: #262626; }
        #status-text { color: #ff4444; font-weight: bold; }
        .speed { color: #888; font-size: 0.9em; }
    </style>
</head>
<body>

    <div class="card">
        <h1>RTC MINER</h1>
        
        <div class="status-box">
            حالة السيرفر: <span id="status-text">جاري الفحص...</span>
        </div>
        
        <div class="balance">
            <span id="rtc-balance">0.000000</span>
            <div style="font-size: 0.4em; color: #00ff00;">RTC COIN</div>
        </div>

        <div class="speed">
            قوة التعدين الحالية: 1.2 MH/s
        </div>
    </div>

    <script>
        // الرابط المباشر لسيرفرك
        const API_URL = 'https://rtc-miner-server.onrender.com/';

        async function updateDashboard() {
            const statusLabel = document.getElementById('status-text');
            const balanceLabel = document.getElementById('rtc-balance');

            try {
                // جلب البيانات مع إضافة تذبذب عشوائي بسيط لمنع المتصفح من كاش البيانات القديمة
                const response = await fetch(`${API_URL}?t=${Date.now()}`);
                
                if (!response.ok) throw new Error('Network response was not ok');
                
                const data = await response.json();

                if (data.total_mined !== undefined) {
                    // تحديث الواجهة عند النجاح
                    balanceLabel.innerText = data.total_mined.toFixed(6);
                    statusLabel.innerText = "متصل ونشط ✅";
                    statusLabel.style.color = "#00ff00";
                    console.log("Mining Update:", data.total_mined);
                }
            } catch (error) {
                // عند الفشل في الاتصال
                console.error("Connection Error:", error);
                statusLabel.innerText = "جاري إعادة الاتصال بالسيرفر...";
                statusLabel.style.color = "#ff4444";
            }
        }

        // التحديث كل 3 ثوانٍ لمزامنة السيرفر الألماني
        setInterval(updateDashboard, 3000);
        
        // تشغيل أولي
        updateDashboard();
    </script>
</body>
</html>
